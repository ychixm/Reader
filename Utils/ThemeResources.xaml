<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/PresentationFramework.Fluent;component/Themes/Fluent.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!-- Light Theme Brushes -->
    <SolidColorBrush x:Key="TabItemBackground_Light">#FFF0F0F0</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemBorderBrush_Light">#FFABADB3</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemForeground_Light">Black</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemBackground_Selected_Light">White</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemForeground_Selected_Light">Black</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemBackground_MouseOver_Light">#FFE5E5E5</SolidColorBrush>
    <SolidColorBrush x:Key="TabControlContentBackground_Light">White</SolidColorBrush>
    <SolidColorBrush x:Key="PanelBackground_Light">#FFF0F0F0</SolidColorBrush>
    <SolidColorBrush x:Key="MenuBackground_Light">#FFEAEAEA</SolidColorBrush>
    <SolidColorBrush x:Key="MenuItemForeground_Light">#FF1E1E1E</SolidColorBrush>
    <SolidColorBrush x:Key="MenuSeparatorBackground_Light">#FFD0D0D0</SolidColorBrush>
    <SolidColorBrush x:Key="ButtonBackground_Light">#FFF0F0F0</SolidColorBrush>
    <SolidColorBrush x:Key="ButtonForeground_Light">#FF1E1E1E</SolidColorBrush>
    <SolidColorBrush x:Key="ButtonBorder_Light">#FFABADB3</SolidColorBrush>
    <SolidColorBrush x:Key="ButtonBackgroundHover_Light">#FFDADADA</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemBackground_Light">Transparent</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemForeground_Light">#FF1E1E1E</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemBackgroundHover_Light">#FFE5E5E5</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemBackgroundSelected_Light">#FFCDE8FF</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemForegroundSelected_Light">#FF000000</SolidColorBrush>
    <SolidColorBrush x:Key="ScrollBarThumbFill_Light">#FFCDCDCD</SolidColorBrush>
    <SolidColorBrush x:Key="ScrollBarTrackBackground_Light">#FFF0F0F0</SolidColorBrush>
    <SolidColorBrush x:Key="DefaultForeground_Light">#FF000000</SolidColorBrush>
    <!-- New for TextBlock -->
    <SolidColorBrush x:Key="GroupBoxBorder_Light">#FFABADB3</SolidColorBrush>
    <!-- New for GroupBox -->
    <SolidColorBrush x:Key="GroupBoxHeaderForeground_Light">#FF1E1E1E</SolidColorBrush>
    <!-- New for GroupBox -->

    <!-- Dark Theme Brushes -->
    <SolidColorBrush x:Key="TabItemBackground_Dark">#FF333333</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemBorderBrush_Dark">#FF555555</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemForeground_Dark">White</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemBackground_Selected_Dark">#FF505050</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemForeground_Selected_Dark">White</SolidColorBrush>
    <SolidColorBrush x:Key="TabItemBackground_MouseOver_Dark">#FF454545</SolidColorBrush>
    <SolidColorBrush x:Key="TabControlContentBackground_Dark">#FF252525</SolidColorBrush>
    <SolidColorBrush x:Key="PanelBackground_Dark">#FF2D2D30</SolidColorBrush>
    <SolidColorBrush x:Key="MenuBackground_Dark">#FF3E3E42</SolidColorBrush>
    <SolidColorBrush x:Key="MenuItemForeground_Dark">#FFF1F1F1</SolidColorBrush>
    <SolidColorBrush x:Key="MenuSeparatorBackground_Dark">#FF555555</SolidColorBrush>
    <SolidColorBrush x:Key="ButtonBackground_Dark">#FF3E3E42</SolidColorBrush>
    <SolidColorBrush x:Key="ButtonForeground_Dark">#FFF1F1F1</SolidColorBrush>
    <SolidColorBrush x:Key="ButtonBorder_Dark">#FF555555</SolidColorBrush>
    <SolidColorBrush x:Key="ButtonBackgroundHover_Dark">#FF555555</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemBackground_Dark">Transparent</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemForeground_Dark">#FFF1F1F1</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemBackgroundHover_Dark">#FF454545</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemBackgroundSelected_Dark">#FF505050</SolidColorBrush>
    <SolidColorBrush x:Key="ListItemForegroundSelected_Dark">#FFFFFFFF</SolidColorBrush>
    <SolidColorBrush x:Key="ScrollBarThumbFill_Dark">#FF686868</SolidColorBrush>
    <SolidColorBrush x:Key="ScrollBarTrackBackground_Dark">#FF3E3E42</SolidColorBrush>
    <SolidColorBrush x:Key="DefaultForeground_Dark">#FFFFFFFF</SolidColorBrush>
    <!-- New for TextBlock -->
    <SolidColorBrush x:Key="GroupBoxBorder_Dark">#FF555555</SolidColorBrush>
    <!-- New for GroupBox -->
    <SolidColorBrush x:Key="GroupBoxHeaderForeground_Dark">#FFF1F1F1</SolidColorBrush>
    <!-- New for GroupBox -->

    <!-- Generic Theme-Aware Brush Keys (Placeholders to be populated by ThemeManager) -->
    <SolidColorBrush x:Key="TabItemBackgroundBrush"/>
    <SolidColorBrush x:Key="TabItemBorderBrush"/>
    <SolidColorBrush x:Key="TabItemForegroundBrush"/>
    <SolidColorBrush x:Key="TabItemBackground_SelectedBrush"/>
    <SolidColorBrush x:Key="TabItemForeground_SelectedBrush"/>
    <SolidColorBrush x:Key="TabItemBackground_MouseOverBrush"/>
    <SolidColorBrush x:Key="TabControlContentBackgroundBrush"/>
    <SolidColorBrush x:Key="PanelBackgroundBrush"/>
    <SolidColorBrush x:Key="MenuBackgroundBrush"/>
    <SolidColorBrush x:Key="MenuItemForegroundBrush"/>
    <SolidColorBrush x:Key="MenuSeparatorBackgroundBrush"/>
    <SolidColorBrush x:Key="ButtonBackgroundBrush"/>
    <SolidColorBrush x:Key="ButtonForegroundBrush"/>
    <SolidColorBrush x:Key="ButtonBorderBrush"/>
    <SolidColorBrush x:Key="ButtonBackgroundHoverBrush"/>
    <SolidColorBrush x:Key="ListItemBackgroundBrush"/>
    <SolidColorBrush x:Key="ListItemForegroundBrush"/>
    <SolidColorBrush x:Key="ListItemBackgroundHoverBrush"/>
    <SolidColorBrush x:Key="ListItemBackgroundSelectedBrush"/>
    <SolidColorBrush x:Key="ListItemForegroundSelectedBrush"/>
    <SolidColorBrush x:Key="ScrollBarThumbFillBrush"/>
    <SolidColorBrush x:Key="ScrollBarTrackBackgroundBrush"/>
    <SolidColorBrush x:Key="DefaultForegroundBrush"/>
    <!-- New for TextBlock -->
    <SolidColorBrush x:Key="GroupBoxBorderBrush"/>
    <!-- New for GroupBox -->
    <SolidColorBrush x:Key="GroupBoxHeaderForegroundBrush"/>
    <!-- New for GroupBox -->

    <!-- Label Styles (Keeping existing ones for now) -->
    <Style x:Key="DarkModeLabelStyle" TargetType="Label">
        <Setter Property="Foreground" Value="White"/>
    </Style>
    <Style x:Key="LightModeLabelStyle" TargetType="Label">
        <Setter Property="Foreground" Value="Black"/>
    </Style>

    <!-- Global Styles Moved from MainUserControl.xaml and New Global Styles -->

    <Style x:Key="ModernTabItemStyle" TargetType="TabItem">
        <Setter Property="Foreground" Value="{DynamicResource TabItemForegroundBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TabItem">
                    <Grid x:Name="templateRoot">
                        <Border x:Name="TabBorder"
                                BorderBrush="{DynamicResource TabItemBorderBrush}"
                                BorderThickness="1,1,1,0"
                                CornerRadius="5,5,0,0"
                                Background="{DynamicResource TabItemBackgroundBrush}">
                            <ContentPresenter x:Name="ContentSite"
                                              ContentSource="Header"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="12,2,12,2"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="TabBorder" Property="Background" Value="{DynamicResource TabItemBackground_SelectedBrush}"/>
                            <Setter Property="Panel.ZIndex" Value="1"/>
                            <Setter Property="Foreground" Value="{DynamicResource TabItemForeground_SelectedBrush}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsSelected" Value="False"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="TabBorder" Property="Background" Value="{DynamicResource TabItemBackground_MouseOverBrush}"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="TabControl" x:Key="ScrollableTabControlStyle">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TabControl">
                    <Grid KeyboardNavigation.TabNavigation="Local">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0" Height="30">
                            <!-- This is the HeaderAreaGrid -->
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <!-- LeftScrollButton -->
                                <ColumnDefinition Width="*"/>
                                <!-- TabItemsScrollViewer -->
                                <ColumnDefinition Width="Auto"/>
                                <!-- RightScrollButton -->
                                <ColumnDefinition Width="Auto"/>
                                <!-- TabListDropdownButton -->
                            </Grid.ColumnDefinitions>

                            <RepeatButton x:Name="LeftScrollButton" Grid.Column="0" Content="&lt;" VerticalAlignment="Center" Focusable="False" Visibility="Collapsed" />

                            <ScrollViewer x:Name="TabItemsScrollViewer" Grid.Column="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                                <ItemsPresenter x:Name="PART_ItemsHolder" Margin="2,2,0,0" />
                            </ScrollViewer>

                            <RepeatButton x:Name="RightScrollButton" Grid.Column="2" Content="&gt;" VerticalAlignment="Center" Focusable="False" Visibility="Collapsed" />

                            <Button x:Name="TabListDropdownButton" Grid.Column="3" Content="v" VerticalAlignment="Center" Focusable="False" Width="25" Visibility="Collapsed"/>
                        </Grid>
                        <Border Grid.Row="1"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                Background="{DynamicResource TabControlContentBackgroundBrush}">
                            <ContentPresenter x:Name="PART_SelectedContentHost"
                                              ContentSource="SelectedContent"
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <DataTrigger Binding="{Binding CurrentTabOverflowMode}" Value="Scrollbar">
                            <Setter TargetName="LeftScrollButton" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="RightScrollButton" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="TabListDropdownButton" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="TabItemsScrollViewer" Property="HorizontalScrollBarVisibility" Value="Auto"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding CurrentTabOverflowMode}" Value="ArrowButtons">
                            <Setter TargetName="LeftScrollButton" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="RightScrollButton" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="TabListDropdownButton" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="TabItemsScrollViewer" Property="HorizontalScrollBarVisibility" Value="Hidden"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding CurrentTabOverflowMode}" Value="TabDropdown">
                            <Setter TargetName="LeftScrollButton" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="RightScrollButton" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="TabListDropdownButton" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="TabItemsScrollViewer" Property="HorizontalScrollBarVisibility" Value="Hidden"/>
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="MenuItem">
        <Setter Property="Foreground" Value="{DynamicResource MenuItemForegroundBrush}"/>
        <Setter Property="Background" Value="{DynamicResource MenuBackgroundBrush}"/>
    </Style>

    <Style TargetType="Separator">
        <Setter Property="Background" Value="{DynamicResource MenuSeparatorBackgroundBrush}"/>
        <Setter Property="Height" Value="1"/>
        <Setter Property="Margin" Value="4,5,4,5"/>
    </Style>

    <Style TargetType="Button">
        <Setter Property="Background" Value="{DynamicResource ButtonBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{DynamicResource ButtonForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource ButtonBorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="5,2"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            SnapsToDevicePixels="true">
                        <ContentPresenter x:Name="contentPresenter"
                                          Focusable="False"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          Margin="{TemplateBinding Padding}"
                                          RecognizesAccessKey="True"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{DynamicResource ButtonBackgroundHoverBrush}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{DynamicResource ButtonBackgroundBrush}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Opacity" Value="0.56"/>
                            <Setter Property="Foreground" Value="#FF888888"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="ScrollViewer">
        <Setter Property="Background" Value="{DynamicResource TabControlContentBackgroundBrush}"/>
    </Style>

    <!-- New Implicit Style for TextBlock -->
    <Style TargetType="TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource DefaultForegroundBrush}" />
        <!-- Add other TextBlock properties if needed, e.g., FontSize, FontFamily -->
    </Style>

    <!-- New Implicit Style for GroupBox -->
    <Style TargetType="GroupBox">
        <Setter Property="BorderBrush" Value="{DynamicResource GroupBoxBorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="5" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="GroupBox">
                    <Grid SnapsToDevicePixels="True">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0,0,0,1" Padding="0,0,0,2">
                            <ContentPresenter ContentSource="Header" RecognizesAccessKey="True" TextElement.Foreground="{DynamicResource GroupBoxHeaderForegroundBrush}" Margin="2,0,0,0"/>
                        </Border>
                        <Border Grid.Row="1" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1,0,1,1">
                            <ContentPresenter Margin="{TemplateBinding Padding}" />
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
